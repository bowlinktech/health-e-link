/* Chad 11-8-2013 */
ALTER TABLE `universalTranslator`.`providers` 
RENAME TO  `universalTranslator`.`info_providers` ;

ALTER TABLE `universalTranslator`.`configurations` 
ADD COLUMN `dateCreated` DATETIME NULL DEFAULT CURRENT_TIMESTAMP AFTER `messageTypeId`;


/* Chad 11-11-13 */
CREATE TABLE `universalTranslator`.`ref_transportMethods` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `transportMethod` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`));
  
INSERT INTO `universalTranslator`.`ref_transportMethods` (`transportMethod`) VALUES ('File Upload');
INSERT INTO `universalTranslator`.`ref_transportMethods` (`transportMethod`) VALUES ('Online Form');
INSERT INTO `universalTranslator`.`ref_transportMethods` (`transportMethod`) VALUES ('Secure FTP');
INSERT INTO `universalTranslator`.`ref_transportMethods` (`transportMethod`) VALUES ('JSON');

ALTER TABLE `universalTranslator`.`configurations` 
ADD COLUMN `stepsCompleted` INT NOT NULL DEFAULT 0 AFTER `dateCreated`;

/* Chad 11-12-2013 */
ALTER TABLE `universalTranslator`.`configurationTransportDetails` 
DROP FOREIGN KEY `filetypeId`,
DROP FOREIGN KEY `fileDelimId`;


ALTER TABLE `universalTranslator`.`configurationFieldMappings` 
CHANGE COLUMN `sourceFieldNo` `configurationFieldId` INT(11) NOT NULL ,
CHANGE COLUMN `targetFieldNo` `messageTypeFieldId` INT(11) NOT NULL ;

ALTER TABLE `universalTranslator`.`configurationFormFields` 
DROP COLUMN `saveToTableCol`,
DROP COLUMN `saveToTableName`,
ADD COLUMN `useField` BIT NOT NULL DEFAULT FALSE AFTER `bucketDspPos`,
DROP INDEX `ffrefTableColId_idx` ,
DROP INDEX `ffrefTableId_idx` ;

ALTER TABLE `universalTranslator`.`configurationFormFields` 
ADD COLUMN `fieldDesc` VARCHAR(255) NULL DEFAULT NULL AFTER `fieldNo`,
ADD COLUMN `messageTypeFieldId` INT NOT NULL DEFAULT 0 AFTER `id`;

ALTER TABLE `universalTranslator`.`configurationTransportDetails` 
CHANGE COLUMN `fileType` `fileType` INT(11) NULL DEFAULT NULL ;

/* Chad 11-14-2013 */
DROP TABLE `universalTranslator`.`configurationFieldMappings`;

ALTER TABLE `universalTranslator`.`configurations` 
DROP COLUMN `configName`;

ALTER TABLE `universalTranslator`.`configurationFormFields` 
ADD COLUMN `transportDetailId` INT NOT NULL AFTER `configId`,
ADD INDEX `formtransportDetailId_idx` (`transportDetailId` ASC);
ALTER TABLE `universalTranslator`.`configurationFormFields` 
ADD CONSTRAINT `formtransportDetailId`
  FOREIGN KEY (`transportDetailId`)
  REFERENCES `universalTranslator`.`configurationTransportDetails` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
  /* Chad 11-18-2013 */
  ALTER TABLE `universalTranslator`.`rel_configurationDataTranslations` 
CHANGE COLUMN `fieldNo` `fieldId` INT(11) NOT NULL ;
 ADD COLUMN `transportMethod` INT NOT NULL AFTER `configId`;

ALTER TABLE `universalTranslator`.`rel_configurationDataTranslations` 
ADD INDEX `dtFieldId_idx` (`fieldId` ASC);
ALTER TABLE `universalTranslator`.`rel_configurationDataTranslations` 
ADD CONSTRAINT `dtFieldId`
  FOREIGN KEY (`fieldId`)
  REFERENCES `universalTranslator`.`configurationFormFields` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

  


