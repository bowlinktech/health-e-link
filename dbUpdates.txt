/* Chad 12.19.2013 */

ALTER TABLE `universalTranslator`.`configurations` 
DROP COLUMN `rejectOnError`,
DROP COLUMN `clearFields`,
ADD COLUMN `userId` INT NOT NULL AFTER `orgId`,
ADD INDEX `configUserIdfk_idx` (`userId` ASC);
ALTER TABLE `universalTranslator`.`configurations` 
ADD CONSTRAINT `configUserIdfk`
  FOREIGN KEY (`userId`)
  REFERENCES `universalTranslator`.`users` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`configurationTransportDetails` 
DROP COLUMN `reportableField4`,
DROP COLUMN `reportableField3`,
DROP COLUMN `reportableField2`,
DROP COLUMN `reportableField1`,
DROP COLUMN `containsHeader`,
DROP COLUMN `targetOrgColNo`,
DROP COLUMN `messageTypeCustomVal`,
DROP COLUMN `messageTypeColNo`,
ADD COLUMN `clearRecords` BIT NULL DEFAULT False AFTER `maxFileSize`,
ADD COLUMN `fileLocation` VARCHAR(255) NULL DEFAULT NULL AFTER `clearRecords`,
ADD COLUMN `autoRelease` BIT NULL DEFAULT True AFTER `fileLocation`,
ADD COLUMN `errorHandling` SMALLINT NOT NULL DEFAULT 1 COMMENT '1 = Post errors to ERG\n2 = Reject record on error\n3 = Reject submission on error\n4 = Pass through errors' AFTER `autoRelease`,
ADD COLUMN `mergeBatches` BIT NULL DEFAULT True AFTER `errorHandling`;

CREATE TABLE `universalTranslator`.`configurationTransportMessageTypes` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `configTransportId` INT NOT NULL,
  `configId` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `configTransIdfk_idx` (`configId` ASC),
  INDEX `configTransportIdfk_idx` (`configTransportId` ASC),
  CONSTRAINT `configTransconfigIdfk`
    FOREIGN KEY (`configId`)
    REFERENCES `universalTranslator`.`configurations` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `configTransportIdfk`
    FOREIGN KEY (`configTransportId`)
    REFERENCES `universalTranslator`.`configurationTransportDetails` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

ALTER TABLE `universalTranslator`.`rel_configurationDataTranslations` 
RENAME TO  `universalTranslator`.`configurationDataTranslations` ;

ALTER TABLE `universalTranslator`.`configurationTransportDetails` 
DROP FOREIGN KEY `fkTransport`;
ALTER TABLE `universalTranslator`.`configurationTransportDetails` 
CHANGE COLUMN `transportMethod` `transportMethodId` INT(11) NOT NULL ;
ALTER TABLE `universalTranslator`.`configurationTransportDetails` 
ADD CONSTRAINT `fkTransport`
  FOREIGN KEY (`transportMethodId`)
  REFERENCES `universalTranslator`.`ref_transportMethods` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

UPDATE `universalTranslator`.`ref_transportMethods` SET `transportMethod`='ERG' WHERE `id`='2';

/** grace 12.19.13 */

  INSERT INTO `universalTranslator`.`lu_ProcessStatus` (`category`, `displayCode`, `shortDesc`, `description`) VALUES ('transaction', 'PO', 'Pending Output', 'This is when a transaction is released but waiting to have output file generated');
  
  ALTER TABLE `universalTranslator`.`batchUploads` 
ADD COLUMN `providerId` INT NULL AFTER `errorRecordCount`,
ADD INDEX `bFKProvider_idx` (`providerId` ASC);
ALTER TABLE `universalTranslator`.`batchUploads` 
ADD CONSTRAINT `bFKProvider`
  FOREIGN KEY (`providerId`)
  REFERENCES `universalTranslator`.`info_providers` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
  ALTER TABLE `universalTranslator`.`batchUploads` 
CHANGE COLUMN `providerId` `providerId` INT(11) NULL DEFAULT NULL AFTER `userId`;

ALTER TABLE `universalTranslator`.`transactionTarget` 
DROP FOREIGN KEY `ttargetUserId`,
DROP FOREIGN KEY `tTargetProFK`,
DROP FOREIGN KEY `ttargetOrgId`;
ALTER TABLE `universalTranslator`.`transactionTarget` 
DROP COLUMN `userId`,
DROP COLUMN `providerId`,
DROP COLUMN `orgId`,
CHANGE COLUMN `configurationId` `configId` INT(11) NOT NULL ,
ADD COLUMN `transactionOutId` INT NULL AFTER `transactionInId`,
DROP INDEX `ttargetUserId_idx` ,
DROP INDEX `ttargetOrgId` ,
DROP INDEX `tTargetProFK_idx` ;

ALTER TABLE `universalTranslator`.`transactionTarget` 
DROP FOREIGN KEY `targetBatchId`;
ALTER TABLE `universalTranslator`.`transactionTarget` 
CHANGE COLUMN `batchId` `batchUploadId` INT(11) NOT NULL ,
ADD COLUMN `batchDLId` INT NULL AFTER `transactionOutId`;
ALTER TABLE `universalTranslator`.`transactionTarget` 
ADD CONSTRAINT `targetBatchId`
  FOREIGN KEY (`batchUploadId`)
  REFERENCES `universalTranslator`.`batchUploads` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
ALTER TABLE `universalTranslator`.`batchUploads` 
CHANGE COLUMN `providerId` `providerId` INT(11) NULL DEFAULT NULL AFTER `orgId`;

UPDATE `universalTranslator`.`lu_ProcessStatus` SET `displayCode`='STL' WHERE `id`='7';
  
ALTER TABLE `universalTranslator`.`transactionErrors` 
DROP FOREIGN KEY `errRecordFK`,
DROP FOREIGN KEY `errUploadFK`;
ALTER TABLE `universalTranslator`.`transactionErrors` 
DROP COLUMN `transactionOutId`,
DROP COLUMN `batchDownloadId`,
CHANGE COLUMN `batchUploadId` `batchId` INT(11) NOT NULL ,
CHANGE COLUMN `transactionInId` `transactionId` INT(11) NOT NULL ,
ADD COLUMN `uploadType` VARCHAR(1) NULL DEFAULT 'u' COMMENT 'U for Upload and D for download' AFTER `dateCreated`;
ALTER TABLE `universalTranslator`.`transactionErrors` 
ADD CONSTRAINT `errRecordFK`
  FOREIGN KEY (`transactionId`)
  REFERENCES `universalTranslator`.`transactionIn` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,
ADD CONSTRAINT `errUploadFK`
  FOREIGN KEY (`batchId`)
  REFERENCES `universalTranslator`.`batchuploads` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
ALTER TABLE `universalTranslator`.`transactionErrors` 
ADD COLUMN `sourceOrTarget` VARCHAR(1) NULL DEFAULT 's' COMMENT 'by default it will be source error unless specified as T for target' AFTER `dateCreated`;

ALTER TABLE `universalTranslator`.`transactionErrors` 
DROP FOREIGN KEY `errUploadFK`,
DROP FOREIGN KEY `errRecordFK`;
ALTER TABLE `universalTranslator`.`transactionErrors` 
CHANGE COLUMN `sourceOrTarget` `sourceOrTarget` VARCHAR(1) NULL DEFAULT 's' COMMENT 'by default it will be source error unless specified as T for target' AFTER `transactionId`,
DROP INDEX `errUploadFK_idx` ,
DROP INDEX `errRecordFK_idx` ;

ALTER TABLE `universalTranslator`.`batchUploads` 
CHANGE COLUMN `batchName` `utBatchName` VARCHAR(255) NOT NULL COMMENT 'this will be what we rename the file to' ,
ADD COLUMN `utBatchConfName` VARCHAR(45) NULL COMMENT 'this will be the confirmation number we give user' AFTER `userId`;

ALTER TABLE `universalTranslator`.`transactionIn` 
CHANGE COLUMN `configurationId` `configId` INT(11) NOT NULL ;

ALTER TABLE `universalTranslator`.`transactionTarget` 
DROP COLUMN `transactionOutId`;

/** target tables **/

CREATE TABLE `universalTranslator`.`BatchDownloads` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `orgId` INT NULL,
  `providerId` INT NULL,
  `userId` INT NULL,
  `transportMethodId` INT NULL,
  `outputFileName` VARCHAR(75) NULL,
  `dateCreated` DATETIME NOT NULL DEFAULT current_timestamp,
  `startDateTime` DATETIME NULL,
  `endDateTime` DATETIME NULL,
  `statusId` INT NULL,
  `totalRecordCount` INT NULL,
  `totalErrorCount` INT NULL,
  `deleted` BIT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `bdUserId_idx` (`userId` ASC),
  INDEX `bdOrgId_idx` (`orgId` ASC),
  INDEX `bdProviderId_idx` (`providerId` ASC),
  CONSTRAINT `bdUserId`
    FOREIGN KEY (`userId`)
    REFERENCES `universalTranslator`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `bdOrgId`
    FOREIGN KEY (`orgId`)
    REFERENCES `universalTranslator`.`organizations` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `bdProviderId`
    FOREIGN KEY (`providerId`)
    REFERENCES `universalTranslator`.`info_providers` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

ALTER TABLE `universalTranslator`.`BatchDownloads` 
ADD INDEX `transportFK_idx` (`transportMethodId` ASC),
ADD INDEX `bdStatusFK_idx` (`statusId` ASC);
ALTER TABLE `universalTranslator`.`BatchDownloads` 
ADD CONSTRAINT `transportFK`
  FOREIGN KEY (`transportMethodId`)
  REFERENCES `universalTranslator`.`ref_transportMethods` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,
ADD CONSTRAINT `bdStatusFK`
  FOREIGN KEY (`statusId`)
  REFERENCES `universalTranslator`.`lu_ProcessStatus` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

  
  CREATE TABLE `transactionOutRecords` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `transactionTargetId` int(11) NOT NULL,
  `f1` varchar(255) DEFAULT NULL,
  `f2` varchar(255) DEFAULT NULL,
  `f3` varchar(255) DEFAULT NULL,
  `f4` varchar(255) DEFAULT NULL,
  `f5` varchar(255) DEFAULT NULL,
  `f6` varchar(255) DEFAULT NULL,
  `f7` varchar(255) DEFAULT NULL,
  `f8` varchar(255) DEFAULT NULL,
  `f9` varchar(255) DEFAULT NULL,
  `f10` varchar(255) DEFAULT NULL,
  `f11` varchar(255) DEFAULT NULL,
  `f12` varchar(255) DEFAULT NULL,
  `f13` varchar(255) DEFAULT NULL,
  `f14` varchar(255) DEFAULT NULL,
  `f15` varchar(255) DEFAULT NULL,
  `f16` varchar(255) DEFAULT NULL,
  `f17` varchar(255) DEFAULT NULL,
  `f18` varchar(255) DEFAULT NULL,
  `f19` varchar(255) DEFAULT NULL,
  `f20` varchar(255) DEFAULT NULL,
  `f21` varchar(255) DEFAULT NULL,
  `f22` varchar(255) DEFAULT NULL,
  `f23` varchar(255) DEFAULT NULL,
  `f24` varchar(255) DEFAULT NULL,
  `f25` varchar(255) DEFAULT NULL,
  `f26` varchar(255) DEFAULT NULL,
  `f27` varchar(255) DEFAULT NULL,
  `f28` varchar(255) DEFAULT NULL,
  `f29` varchar(255) DEFAULT NULL,
  `f30` varchar(255) DEFAULT NULL,
  `f31` varchar(255) DEFAULT NULL,
  `f32` varchar(255) DEFAULT NULL,
  `f33` varchar(255) DEFAULT NULL,
  `f34` varchar(255) DEFAULT NULL,
  `f35` varchar(255) DEFAULT NULL,
  `f36` varchar(255) DEFAULT NULL,
  `f37` varchar(255) DEFAULT NULL,
  `f38` varchar(255) DEFAULT NULL,
  `f39` varchar(255) DEFAULT NULL,
  `f40` varchar(255) DEFAULT NULL,
  `f41` varchar(255) DEFAULT NULL,
  `f42` varchar(255) DEFAULT NULL,
  `f43` varchar(255) DEFAULT NULL,
  `f44` varchar(255) DEFAULT NULL,
  `f45` varchar(255) DEFAULT NULL,
  `f46` varchar(255) DEFAULT NULL,
  `f47` varchar(255) DEFAULT NULL,
  `f48` varchar(255) DEFAULT NULL,
  `f49` varchar(255) DEFAULT NULL,
  `f50` varchar(255) DEFAULT NULL,
  `f51` varchar(255) DEFAULT NULL,
  `f52` varchar(255) DEFAULT NULL,
  `f53` varchar(255) DEFAULT NULL,
  `f54` varchar(255) DEFAULT NULL,
  `f55` varchar(255) DEFAULT NULL,
  `f56` varchar(255) DEFAULT NULL,
  `f57` varchar(255) DEFAULT NULL,
  `f58` varchar(255) DEFAULT NULL,
  `f59` varchar(255) DEFAULT NULL,
  `f60` varchar(255) DEFAULT NULL,
  `f61` varchar(255) DEFAULT NULL,
  `f62` varchar(255) DEFAULT NULL,
  `f63` varchar(255) DEFAULT NULL,
  `f64` varchar(255) DEFAULT NULL,
  `f65` varchar(255) DEFAULT NULL,
  `f66` varchar(255) DEFAULT NULL,
  `f67` varchar(255) DEFAULT NULL,
  `f68` varchar(255) DEFAULT NULL,
  `f69` varchar(255) DEFAULT NULL,
  `f70` varchar(255) DEFAULT NULL,
  `f71` varchar(255) DEFAULT NULL,
  `f72` varchar(255) DEFAULT NULL,
  `f73` varchar(255) DEFAULT NULL,
  `f74` varchar(255) DEFAULT NULL,
  `f75` varchar(255) DEFAULT NULL,
  `f76` varchar(255) DEFAULT NULL,
  `f77` varchar(255) DEFAULT NULL,
  `f78` varchar(255) DEFAULT NULL,
  `f79` varchar(255) DEFAULT NULL,
  `f80` varchar(255) DEFAULT NULL,
  `f81` varchar(255) DEFAULT NULL,
  `f82` varchar(255) DEFAULT NULL,
  `f83` varchar(255) DEFAULT NULL,
  `f84` varchar(255) DEFAULT NULL,
  `f85` varchar(255) DEFAULT NULL,
  `f86` varchar(255) DEFAULT NULL,
  `f87` varchar(255) DEFAULT NULL,
  `f88` varchar(255) DEFAULT NULL,
  `f89` varchar(255) DEFAULT NULL,
  `f90` varchar(255) DEFAULT NULL,
  `f91` varchar(255) DEFAULT NULL,
  `f92` varchar(255) DEFAULT NULL,
  `f93` varchar(255) DEFAULT NULL,
  `f94` varchar(255) DEFAULT NULL,
  `f95` varchar(255) DEFAULT NULL,
  `f96` varchar(255) DEFAULT NULL,
  `f97` varchar(255) DEFAULT NULL,
  `f98` varchar(255) DEFAULT NULL,
  `f99` varchar(255) DEFAULT NULL,
  `f100` varchar(255) DEFAULT NULL,
  `f101` varchar(255) DEFAULT NULL,
  `f102` varchar(255) DEFAULT NULL,
  `f103` varchar(255) DEFAULT NULL,
  `f104` varchar(255) DEFAULT NULL,
  `f105` varchar(255) DEFAULT NULL,
  `f106` varchar(255) DEFAULT NULL,
  `f107` varchar(255) DEFAULT NULL,
  `f108` varchar(255) DEFAULT NULL,
  `f109` varchar(255) DEFAULT NULL,
  `f110` varchar(255) DEFAULT NULL,
  `f111` varchar(255) DEFAULT NULL,
  `f112` varchar(255) DEFAULT NULL,
  `f113` varchar(255) DEFAULT NULL,
  `f114` varchar(255) DEFAULT NULL,
  `f115` varchar(255) DEFAULT NULL,
  `f116` varchar(255) DEFAULT NULL,
  `f117` varchar(255) DEFAULT NULL,
  `f118` varchar(255) DEFAULT NULL,
  `f119` varchar(255) DEFAULT NULL,
  `f120` varchar(255) DEFAULT NULL,
  `f121` varchar(255) DEFAULT NULL,
  `f122` varchar(255) DEFAULT NULL,
  `f123` varchar(255) DEFAULT NULL,
  `f124` varchar(255) DEFAULT NULL,
  `f125` varchar(255) DEFAULT NULL,
  `f126` varchar(255) DEFAULT NULL,
  `f127` varchar(255) DEFAULT NULL,
  `f128` varchar(255) DEFAULT NULL,
  `f129` varchar(255) DEFAULT NULL,
  `f130` varchar(255) DEFAULT NULL,
  `f131` varchar(255) DEFAULT NULL,
  `f132` varchar(255) DEFAULT NULL,
  `f133` varchar(255) DEFAULT NULL,
  `f134` varchar(255) DEFAULT NULL,
  `f135` varchar(255) DEFAULT NULL,
  `f136` varchar(255) DEFAULT NULL,
  `f137` varchar(255) DEFAULT NULL,
  `f138` varchar(255) DEFAULT NULL,
  `f139` varchar(255) DEFAULT NULL,
  `f140` varchar(255) DEFAULT NULL,
  `f141` varchar(255) DEFAULT NULL,
  `f142` varchar(255) DEFAULT NULL,
  `f143` varchar(255) DEFAULT NULL,
  `f144` varchar(255) DEFAULT NULL,
  `f145` varchar(255) DEFAULT NULL,
  `f146` varchar(255) DEFAULT NULL,
  `f147` varchar(255) DEFAULT NULL,
  `f148` varchar(255) DEFAULT NULL,
  `f149` varchar(255) DEFAULT NULL,
  `f150` varchar(255) DEFAULT NULL,
  `f151` varchar(255) DEFAULT NULL,
  `f152` varchar(255) DEFAULT NULL,
  `f153` varchar(255) DEFAULT NULL,
  `f154` varchar(255) DEFAULT NULL,
  `f155` varchar(255) DEFAULT NULL,
  `f156` varchar(255) DEFAULT NULL,
  `f157` varchar(255) DEFAULT NULL,
  `f158` varchar(255) DEFAULT NULL,
  `f159` varchar(255) DEFAULT NULL,
  `f160` varchar(255) DEFAULT NULL,
  `f161` varchar(255) DEFAULT NULL,
  `f162` varchar(255) DEFAULT NULL,
  `f163` varchar(255) DEFAULT NULL,
  `f164` varchar(255) DEFAULT NULL,
  `f165` varchar(255) DEFAULT NULL,
  `f166` varchar(255) DEFAULT NULL,
  `f167` varchar(255) DEFAULT NULL,
  `f168` varchar(255) DEFAULT NULL,
  `f169` varchar(255) DEFAULT NULL,
  `f170` varchar(255) DEFAULT NULL,
  `f171` varchar(255) DEFAULT NULL,
  `f172` varchar(255) DEFAULT NULL,
  `f173` varchar(255) DEFAULT NULL,
  `f174` varchar(255) DEFAULT NULL,
  `f175` varchar(255) DEFAULT NULL,
  `f176` varchar(255) DEFAULT NULL,
  `f177` varchar(255) DEFAULT NULL,
  `f178` varchar(255) DEFAULT NULL,
  `f179` varchar(255) DEFAULT NULL,
  `f180` varchar(255) DEFAULT NULL,
  `f181` varchar(255) DEFAULT NULL,
  `f182` varchar(255) DEFAULT NULL,
  `f183` varchar(255) DEFAULT NULL,
  `f184` varchar(255) DEFAULT NULL,
  `f185` varchar(255) DEFAULT NULL,
  `f186` varchar(255) DEFAULT NULL,
  `f187` varchar(255) DEFAULT NULL,
  `f188` varchar(255) DEFAULT NULL,
  `f189` varchar(255) DEFAULT NULL,
  `f190` varchar(255) DEFAULT NULL,
  `f191` varchar(255) DEFAULT NULL,
  `f192` varchar(255) DEFAULT NULL,
  `f193` varchar(255) DEFAULT NULL,
  `f194` varchar(255) DEFAULT NULL,
  `f195` varchar(255) DEFAULT NULL,
  `f196` varchar(255) DEFAULT NULL,
  `f197` varchar(255) DEFAULT NULL,
  `f198` varchar(255) DEFAULT NULL,
  `f199` varchar(255) DEFAULT NULL,
  `f200` varchar(255) DEFAULT NULL,
  `f201` varchar(255) DEFAULT NULL,
  `f202` varchar(255) DEFAULT NULL,
  `f203` varchar(255) DEFAULT NULL,
  `f204` varchar(255) DEFAULT NULL,
  `f205` varchar(255) DEFAULT NULL,
  `f206` varchar(255) DEFAULT NULL,
  `f207` varchar(255) DEFAULT NULL,
  `f208` varchar(255) DEFAULT NULL,
  `f209` varchar(255) DEFAULT NULL,
  `f210` varchar(255) DEFAULT NULL,
  `f211` varchar(255) DEFAULT NULL,
  `f212` varchar(255) DEFAULT NULL,
  `f213` varchar(255) DEFAULT NULL,
  `f214` varchar(255) DEFAULT NULL,
  `f215` varchar(255) DEFAULT NULL,
  `f216` varchar(255) DEFAULT NULL,
  `f217` varchar(255) DEFAULT NULL,
  `f218` varchar(255) DEFAULT NULL,
  `f219` varchar(255) DEFAULT NULL,
  `f220` varchar(255) DEFAULT NULL,
  `f221` varchar(255) DEFAULT NULL,
  `f222` varchar(255) DEFAULT NULL,
  `f223` varchar(255) DEFAULT NULL,
  `f224` varchar(255) DEFAULT NULL,
  `f225` varchar(255) DEFAULT NULL,
  `f226` varchar(255) DEFAULT NULL,
  `f227` varchar(255) DEFAULT NULL,
  `f228` varchar(255) DEFAULT NULL,
  `f229` varchar(255) DEFAULT NULL,
  `f230` varchar(255) DEFAULT NULL,
  `f231` varchar(255) DEFAULT NULL,
  `f232` varchar(255) DEFAULT NULL,
  `f233` varchar(255) DEFAULT NULL,
  `f234` varchar(255) DEFAULT NULL,
  `f235` varchar(255) DEFAULT NULL,
  `f236` varchar(255) DEFAULT NULL,
  `f237` varchar(255) DEFAULT NULL,
  `f238` varchar(255) DEFAULT NULL,
  `f239` varchar(255) DEFAULT NULL,
  `f240` varchar(255) DEFAULT NULL,
  `f241` varchar(255) DEFAULT NULL,
  `f242` varchar(255) DEFAULT NULL,
  `f243` varchar(255) DEFAULT NULL,
  `f244` varchar(255) DEFAULT NULL,
  `f245` varchar(255) DEFAULT NULL,
  `f246` varchar(255) DEFAULT NULL,
  `f247` varchar(255) DEFAULT NULL,
  `f248` varchar(255) DEFAULT NULL,
  `f249` varchar(255) DEFAULT NULL,
  `f250` varchar(255) DEFAULT NULL,
  `f251` varchar(255) DEFAULT NULL,
  `f252` varchar(255) DEFAULT NULL,
  `f253` varchar(255) DEFAULT NULL,
  `f254` varchar(255) DEFAULT NULL,
  `f255` varchar(255) DEFAULT NULL,
  `dateCreated` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `torFK_idx` (`transactionTargetId`),
  CONSTRAINT `torFK` FOREIGN KEY (`transactionTargetId`) REFERENCES `transactionTarget` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
  
 CREATE TABLE `transactionTranslatedOut` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `transactionTargetId` int(11) NOT NULL,
  `f1` varchar(255) DEFAULT NULL,
  `f2` varchar(255) DEFAULT NULL,
  `f3` varchar(255) DEFAULT NULL,
  `f4` varchar(255) DEFAULT NULL,
  `f5` varchar(255) DEFAULT NULL,
  `f6` varchar(255) DEFAULT NULL,
  `f7` varchar(255) DEFAULT NULL,
  `f8` varchar(255) DEFAULT NULL,
  `f9` varchar(255) DEFAULT NULL,
  `f10` varchar(255) DEFAULT NULL,
  `f11` varchar(255) DEFAULT NULL,
  `f12` varchar(255) DEFAULT NULL,
  `f13` varchar(255) DEFAULT NULL,
  `f14` varchar(255) DEFAULT NULL,
  `f15` varchar(255) DEFAULT NULL,
  `f16` varchar(255) DEFAULT NULL,
  `f17` varchar(255) DEFAULT NULL,
  `f18` varchar(255) DEFAULT NULL,
  `f19` varchar(255) DEFAULT NULL,
  `f20` varchar(255) DEFAULT NULL,
  `f21` varchar(255) DEFAULT NULL,
  `f22` varchar(255) DEFAULT NULL,
  `f23` varchar(255) DEFAULT NULL,
  `f24` varchar(255) DEFAULT NULL,
  `f25` varchar(255) DEFAULT NULL,
  `f26` varchar(255) DEFAULT NULL,
  `f27` varchar(255) DEFAULT NULL,
  `f28` varchar(255) DEFAULT NULL,
  `f29` varchar(255) DEFAULT NULL,
  `f30` varchar(255) DEFAULT NULL,
  `f31` varchar(255) DEFAULT NULL,
  `f32` varchar(255) DEFAULT NULL,
  `f33` varchar(255) DEFAULT NULL,
  `f34` varchar(255) DEFAULT NULL,
  `f35` varchar(255) DEFAULT NULL,
  `f36` varchar(255) DEFAULT NULL,
  `f37` varchar(255) DEFAULT NULL,
  `f38` varchar(255) DEFAULT NULL,
  `f39` varchar(255) DEFAULT NULL,
  `f40` varchar(255) DEFAULT NULL,
  `f41` varchar(255) DEFAULT NULL,
  `f42` varchar(255) DEFAULT NULL,
  `f43` varchar(255) DEFAULT NULL,
  `f44` varchar(255) DEFAULT NULL,
  `f45` varchar(255) DEFAULT NULL,
  `f46` varchar(255) DEFAULT NULL,
  `f47` varchar(255) DEFAULT NULL,
  `f48` varchar(255) DEFAULT NULL,
  `f49` varchar(255) DEFAULT NULL,
  `f50` varchar(255) DEFAULT NULL,
  `f51` varchar(255) DEFAULT NULL,
  `f52` varchar(255) DEFAULT NULL,
  `f53` varchar(255) DEFAULT NULL,
  `f54` varchar(255) DEFAULT NULL,
  `f55` varchar(255) DEFAULT NULL,
  `f56` varchar(255) DEFAULT NULL,
  `f57` varchar(255) DEFAULT NULL,
  `f58` varchar(255) DEFAULT NULL,
  `f59` varchar(255) DEFAULT NULL,
  `f60` varchar(255) DEFAULT NULL,
  `f61` varchar(255) DEFAULT NULL,
  `f62` varchar(255) DEFAULT NULL,
  `f63` varchar(255) DEFAULT NULL,
  `f64` varchar(255) DEFAULT NULL,
  `f65` varchar(255) DEFAULT NULL,
  `f66` varchar(255) DEFAULT NULL,
  `f67` varchar(255) DEFAULT NULL,
  `f68` varchar(255) DEFAULT NULL,
  `f69` varchar(255) DEFAULT NULL,
  `f70` varchar(255) DEFAULT NULL,
  `f71` varchar(255) DEFAULT NULL,
  `f72` varchar(255) DEFAULT NULL,
  `f73` varchar(255) DEFAULT NULL,
  `f74` varchar(255) DEFAULT NULL,
  `f75` varchar(255) DEFAULT NULL,
  `f76` varchar(255) DEFAULT NULL,
  `f77` varchar(255) DEFAULT NULL,
  `f78` varchar(255) DEFAULT NULL,
  `f79` varchar(255) DEFAULT NULL,
  `f80` varchar(255) DEFAULT NULL,
  `f81` varchar(255) DEFAULT NULL,
  `f82` varchar(255) DEFAULT NULL,
  `f83` varchar(255) DEFAULT NULL,
  `f84` varchar(255) DEFAULT NULL,
  `f85` varchar(255) DEFAULT NULL,
  `f86` varchar(255) DEFAULT NULL,
  `f87` varchar(255) DEFAULT NULL,
  `f88` varchar(255) DEFAULT NULL,
  `f89` varchar(255) DEFAULT NULL,
  `f90` varchar(255) DEFAULT NULL,
  `f91` varchar(255) DEFAULT NULL,
  `f92` varchar(255) DEFAULT NULL,
  `f93` varchar(255) DEFAULT NULL,
  `f94` varchar(255) DEFAULT NULL,
  `f95` varchar(255) DEFAULT NULL,
  `f96` varchar(255) DEFAULT NULL,
  `f97` varchar(255) DEFAULT NULL,
  `f98` varchar(255) DEFAULT NULL,
  `f99` varchar(255) DEFAULT NULL,
  `f100` varchar(255) DEFAULT NULL,
  `f101` varchar(255) DEFAULT NULL,
  `f102` varchar(255) DEFAULT NULL,
  `f103` varchar(255) DEFAULT NULL,
  `f104` varchar(255) DEFAULT NULL,
  `f105` varchar(255) DEFAULT NULL,
  `f106` varchar(255) DEFAULT NULL,
  `f107` varchar(255) DEFAULT NULL,
  `f108` varchar(255) DEFAULT NULL,
  `f109` varchar(255) DEFAULT NULL,
  `f110` varchar(255) DEFAULT NULL,
  `f111` varchar(255) DEFAULT NULL,
  `f112` varchar(255) DEFAULT NULL,
  `f113` varchar(255) DEFAULT NULL,
  `f114` varchar(255) DEFAULT NULL,
  `f115` varchar(255) DEFAULT NULL,
  `f116` varchar(255) DEFAULT NULL,
  `f117` varchar(255) DEFAULT NULL,
  `f118` varchar(255) DEFAULT NULL,
  `f119` varchar(255) DEFAULT NULL,
  `f120` varchar(255) DEFAULT NULL,
  `f121` varchar(255) DEFAULT NULL,
  `f122` varchar(255) DEFAULT NULL,
  `f123` varchar(255) DEFAULT NULL,
  `f124` varchar(255) DEFAULT NULL,
  `f125` varchar(255) DEFAULT NULL,
  `f126` varchar(255) DEFAULT NULL,
  `f127` varchar(255) DEFAULT NULL,
  `f128` varchar(255) DEFAULT NULL,
  `f129` varchar(255) DEFAULT NULL,
  `f130` varchar(255) DEFAULT NULL,
  `f131` varchar(255) DEFAULT NULL,
  `f132` varchar(255) DEFAULT NULL,
  `f133` varchar(255) DEFAULT NULL,
  `f134` varchar(255) DEFAULT NULL,
  `f135` varchar(255) DEFAULT NULL,
  `f136` varchar(255) DEFAULT NULL,
  `f137` varchar(255) DEFAULT NULL,
  `f138` varchar(255) DEFAULT NULL,
  `f139` varchar(255) DEFAULT NULL,
  `f140` varchar(255) DEFAULT NULL,
  `f141` varchar(255) DEFAULT NULL,
  `f142` varchar(255) DEFAULT NULL,
  `f143` varchar(255) DEFAULT NULL,
  `f144` varchar(255) DEFAULT NULL,
  `f145` varchar(255) DEFAULT NULL,
  `f146` varchar(255) DEFAULT NULL,
  `f147` varchar(255) DEFAULT NULL,
  `f148` varchar(255) DEFAULT NULL,
  `f149` varchar(255) DEFAULT NULL,
  `f150` varchar(255) DEFAULT NULL,
  `f151` varchar(255) DEFAULT NULL,
  `f152` varchar(255) DEFAULT NULL,
  `f153` varchar(255) DEFAULT NULL,
  `f154` varchar(255) DEFAULT NULL,
  `f155` varchar(255) DEFAULT NULL,
  `f156` varchar(255) DEFAULT NULL,
  `f157` varchar(255) DEFAULT NULL,
  `f158` varchar(255) DEFAULT NULL,
  `f159` varchar(255) DEFAULT NULL,
  `f160` varchar(255) DEFAULT NULL,
  `f161` varchar(255) DEFAULT NULL,
  `f162` varchar(255) DEFAULT NULL,
  `f163` varchar(255) DEFAULT NULL,
  `f164` varchar(255) DEFAULT NULL,
  `f165` varchar(255) DEFAULT NULL,
  `f166` varchar(255) DEFAULT NULL,
  `f167` varchar(255) DEFAULT NULL,
  `f168` varchar(255) DEFAULT NULL,
  `f169` varchar(255) DEFAULT NULL,
  `f170` varchar(255) DEFAULT NULL,
  `f171` varchar(255) DEFAULT NULL,
  `f172` varchar(255) DEFAULT NULL,
  `f173` varchar(255) DEFAULT NULL,
  `f174` varchar(255) DEFAULT NULL,
  `f175` varchar(255) DEFAULT NULL,
  `f176` varchar(255) DEFAULT NULL,
  `f177` varchar(255) DEFAULT NULL,
  `f178` varchar(255) DEFAULT NULL,
  `f179` varchar(255) DEFAULT NULL,
  `f180` varchar(255) DEFAULT NULL,
  `f181` varchar(255) DEFAULT NULL,
  `f182` varchar(255) DEFAULT NULL,
  `f183` varchar(255) DEFAULT NULL,
  `f184` varchar(255) DEFAULT NULL,
  `f185` varchar(255) DEFAULT NULL,
  `f186` varchar(255) DEFAULT NULL,
  `f187` varchar(255) DEFAULT NULL,
  `f188` varchar(255) DEFAULT NULL,
  `f189` varchar(255) DEFAULT NULL,
  `f190` varchar(255) DEFAULT NULL,
  `f191` varchar(255) DEFAULT NULL,
  `f192` varchar(255) DEFAULT NULL,
  `f193` varchar(255) DEFAULT NULL,
  `f194` varchar(255) DEFAULT NULL,
  `f195` varchar(255) DEFAULT NULL,
  `f196` varchar(255) DEFAULT NULL,
  `f197` varchar(255) DEFAULT NULL,
  `f198` varchar(255) DEFAULT NULL,
  `f199` varchar(255) DEFAULT NULL,
  `f200` varchar(255) DEFAULT NULL,
  `f201` varchar(255) DEFAULT NULL,
  `f202` varchar(255) DEFAULT NULL,
  `f203` varchar(255) DEFAULT NULL,
  `f204` varchar(255) DEFAULT NULL,
  `f205` varchar(255) DEFAULT NULL,
  `f206` varchar(255) DEFAULT NULL,
  `f207` varchar(255) DEFAULT NULL,
  `f208` varchar(255) DEFAULT NULL,
  `f209` varchar(255) DEFAULT NULL,
  `f210` varchar(255) DEFAULT NULL,
  `f211` varchar(255) DEFAULT NULL,
  `f212` varchar(255) DEFAULT NULL,
  `f213` varchar(255) DEFAULT NULL,
  `f214` varchar(255) DEFAULT NULL,
  `f215` varchar(255) DEFAULT NULL,
  `f216` varchar(255) DEFAULT NULL,
  `f217` varchar(255) DEFAULT NULL,
  `f218` varchar(255) DEFAULT NULL,
  `f219` varchar(255) DEFAULT NULL,
  `f220` varchar(255) DEFAULT NULL,
  `f221` varchar(255) DEFAULT NULL,
  `f222` varchar(255) DEFAULT NULL,
  `f223` varchar(255) DEFAULT NULL,
  `f224` varchar(255) DEFAULT NULL,
  `f225` varchar(255) DEFAULT NULL,
  `f226` varchar(255) DEFAULT NULL,
  `f227` varchar(255) DEFAULT NULL,
  `f228` varchar(255) DEFAULT NULL,
  `f229` varchar(255) DEFAULT NULL,
  `f230` varchar(255) DEFAULT NULL,
  `f231` varchar(255) DEFAULT NULL,
  `f232` varchar(255) DEFAULT NULL,
  `f233` varchar(255) DEFAULT NULL,
  `f234` varchar(255) DEFAULT NULL,
  `f235` varchar(255) DEFAULT NULL,
  `f236` varchar(255) DEFAULT NULL,
  `f237` varchar(255) DEFAULT NULL,
  `f238` varchar(255) DEFAULT NULL,
  `f239` varchar(255) DEFAULT NULL,
  `f240` varchar(255) DEFAULT NULL,
  `f241` varchar(255) DEFAULT NULL,
  `f242` varchar(255) DEFAULT NULL,
  `f243` varchar(255) DEFAULT NULL,
  `f244` varchar(255) DEFAULT NULL,
  `f245` varchar(255) DEFAULT NULL,
  `f246` varchar(255) DEFAULT NULL,
  `f247` varchar(255) DEFAULT NULL,
  `f248` varchar(255) DEFAULT NULL,
  `f249` varchar(255) DEFAULT NULL,
  `f250` varchar(255) DEFAULT NULL,
  `f251` varchar(255) DEFAULT NULL,
  `f252` varchar(255) DEFAULT NULL,
  `f253` varchar(255) DEFAULT NULL,
  `f254` varchar(255) DEFAULT NULL,
  `f255` varchar(255) DEFAULT NULL,
  `dateCreated` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `ttoFK_idx` (`transactionTargetId`),
  CONSTRAINT `ttoFK` FOREIGN KEY (`transactionTargetId`) REFERENCES `transactionTarget` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

/**
grace 12.19.2013 PM removing null from message_ fields as we don't know what could be a required field**/  
ALTER TABLE `universalTranslator`.`message_FamilyMembers` 
CHANGE COLUMN `relationToPatient` `relationToPatient` VARCHAR(45) NULL COMMENT 'e.g. father, mother, sister, cousin, etc. ' ;

ALTER TABLE `universalTranslator`.`message_FamilyMembers` 
DROP FOREIGN KEY `hsIdFK`;
ALTER TABLE `universalTranslator`.`message_FamilyMembers` 
CHANGE COLUMN `healthStatusId` `healthStatusId` INT(11) NULL DEFAULT NULL COMMENT 'id from lu_HealthStatuses, corresponding to Alive And Well\nIn Remission\nSymptom Free\nChronically Ill\nSeverely Ill\nDisabled\nSeverely Disabled\nDeceased, unknown, etc.' ;
ALTER TABLE `universalTranslator`.`message_FamilyMembers` 
ADD CONSTRAINT `hsIdFK`
  FOREIGN KEY (`healthStatusId`)
  REFERENCES `universalTranslator`.`lu_HealthStatuses` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`message_FromOrg` 
DROP FOREIGN KEY `FKMessFromMessageTypeId`;
ALTER TABLE `universalTranslator`.`message_FromOrg` 
CHANGE COLUMN `messageTypeId` `configId` INT(11) NOT NULL ;
ALTER TABLE `universalTranslator`.`message_FromOrg` 
ADD CONSTRAINT `FKMessFromMessageTypeId`
  FOREIGN KEY (`configId`)
  REFERENCES `universalTranslator`.`messagetypes` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`message_FromOrg` 
DROP FOREIGN KEY `FKMessFromMessageTypeId`;
ALTER TABLE `universalTranslator`.`message_FromOrg` 
DROP INDEX `FKMessFromMessageTypeId_idx` ;

ALTER TABLE `universalTranslator`.`message_FromProvider` 
DROP FOREIGN KEY `FKMessFromPMessageTypeId`;
ALTER TABLE `universalTranslator`.`message_FromProvider` 
CHANGE COLUMN `messageTypeId` `configId` INT(11) NOT NULL ;
ALTER TABLE `universalTranslator`.`message_FromProvider` 
ADD CONSTRAINT `FKMessFromPMessageTypeId`
  FOREIGN KEY (`configId`)
  REFERENCES `universalTranslator`.`messagetypes` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`message_FromProvider` 
DROP FOREIGN KEY `FKMessFromPMessageTypeId`;
ALTER TABLE `universalTranslator`.`message_FromProvider` 
DROP INDEX `FKMessFromPMessageTypeId_idx` ;

ALTER TABLE `universalTranslator`.`message_MedicalConditions` 
DROP FOREIGN KEY `mcStatusId`;
ALTER TABLE `universalTranslator`.`message_MedicalConditions` 
CHANGE COLUMN `conditionStatusId` `conditionStatusId` INT(11) NULL DEFAULT NULL COMMENT 'id from lu_MedicalConditionStatuses table' ;
ALTER TABLE `universalTranslator`.`message_MedicalConditions` 
ADD CONSTRAINT `mcStatusId`
  FOREIGN KEY (`conditionStatusId`)
  REFERENCES `universalTranslator`.`lu_MedicalConditionStatuses` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`message_Medications` 
CHANGE COLUMN `medGeneralStatusId` `medGeneralStatusId` INT(11) NULL DEFAULT NULL COMMENT 'past, current, future, etc.' ;

ALTER TABLE `universalTranslator`.`message_patientIds` 
CHANGE COLUMN `idNum` `idNum` VARCHAR(45) NULL ;

ALTER TABLE `universalTranslator`.`message_Patients` 
DROP FOREIGN KEY `patientStatuses`;
ALTER TABLE `universalTranslator`.`message_Patients` 
CHANGE COLUMN `sourcePatientId` `sourcePatientId` VARCHAR(45) NULL COMMENT 'Id assigned to patient by source system - e.g Pat148R-2KD-BOS' ,
CHANGE COLUMN `patientStatusId` `patientStatusId` INT(11) NULL DEFAULT NULL COMMENT 'id from lu_PatientStatuses - Could be equivalent int value of active, pending, future, expired, etc.' ;
ALTER TABLE `universalTranslator`.`message_Patients` 
ADD CONSTRAINT `patientStatuses`
  FOREIGN KEY (`patientStatusId`)
  REFERENCES `universalTranslator`.`lu_PatientStatuses` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`message_Procedures` 
DROP FOREIGN KEY `proStatusFK`;
ALTER TABLE `universalTranslator`.`message_Procedures` 
CHANGE COLUMN `procStatusId` `procStatusId` INT(11) NULL DEFAULT NULL COMMENT 'id from lu_ProceduresStatuses - equivalent to Cancelled, On Hold, In Progress, Not Completed, present, past, pending, overdue, waiting for approval etc.' ;
ALTER TABLE `universalTranslator`.`message_Procedures` 
ADD CONSTRAINT `proStatusFK`
  FOREIGN KEY (`procStatusId`)
  REFERENCES `universalTranslator`.`lu_ProcedureStatuses` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`message_SocialHistories` 
ADD COLUMN `smokingSince` VARCHAR(45) NULL DEFAULT NULL AFTER `smoker`;

ALTER TABLE `universalTranslator`.`message_TestResults` 
CHANGE COLUMN `testOrder` `testOrder` INT(11) NULL DEFAULT NULL COMMENT 'Several test might be perform in a certain order, this field orders them.' ;

ALTER TABLE `universalTranslator`.`message_ToOrg` 
DROP FOREIGN KEY `FKMessToMessageTypeId`;
ALTER TABLE `universalTranslator`.`message_ToOrg` 
CHANGE COLUMN `messageTypeId` `configId` INT(11) NOT NULL ;
ALTER TABLE `universalTranslator`.`message_ToOrg` 
ADD CONSTRAINT `FKMessToMessageTypeId`
  FOREIGN KEY (`configId`)
  REFERENCES `universalTranslator`.`messagetypes` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `universalTranslator`.`message_ToOrg` 
DROP FOREIGN KEY `FKMessToMessageTypeId`;
ALTER TABLE `universalTranslator`.`message_ToOrg` 
DROP INDEX `FKMessToMessageTypeId_idx` ;

ALTER TABLE `universalTranslator`.`message_ToProvider` 
DROP FOREIGN KEY `FKMessToPMessageTypeId`;
ALTER TABLE `universalTranslator`.`message_ToProvider` 
CHANGE COLUMN `messageTypeId` `configId` INT(11) NOT NULL ;
ALTER TABLE `universalTranslator`.`message_ToProvider` 
ADD CONSTRAINT `FKMessToPMessageTypeId`
  FOREIGN KEY (`configId`)
  REFERENCES `universalTranslator`.`messagetypes` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
ALTER TABLE `universalTranslator`.`message_ToProvider` 
DROP FOREIGN KEY `FKMessToPMessageTypeId`;

ALTER TABLE `universalTranslator`.`message_ToProvider` 
DROP INDEX `FKMessToPMessageTypeId_idx` ;
  
  /* chad 12.19.13 @ 8:30 PM */
CREATE TABLE `universalTranslator`.`configurationMessageSpecs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `configId` INT NOT NULL,
  `templateFile` VARCHAR(255) NOT NULL,
  `messageTypeCol` INT NOT NULL DEFAULT 0,
  `messageTypeVal` VARCHAR(45) NULL DEFAULT NULL,
  `targetOrgCol` INT NOT NULL DEFAULT 0,
  `containsHeaderRow` BIT NOT NULL DEFAULT 0,
  `rptField1` INT NOT NULL DEFAULT 0,
  `rptField2` INT NOT NULL DEFAULT 0 COMMENT '	',
  `rptField3` INT NOT NULL DEFAULT 0,
  `rptField4` INT NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `specConfigIdFk_idx` (`configId` ASC),
  CONSTRAINT `specConfigIdFk`
    FOREIGN KEY (`configId`)
    REFERENCES `universalTranslator`.`configurations` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

ALTER TABLE `universalTranslator`.`configurationMessageSpecs` 
CHANGE COLUMN `templateFile` `templateFile` VARCHAR(255) NULL DEFAULT NULL ;

ALTER TABLE `universalTranslator`.`configurationTransportDetails` 
DROP COLUMN `fileName`;